---
layout: post
title: JVM、(DVM)Dalvik和ART理解
categories: Android系统
description: 理解JVM、Dalvik和ART的联系和区别。
keywords: Android系统

---

## 理解JVM、Dalvik和ART的联系和区别。

### JVM
#### JVM内存模型

类装载子系统-----（类文件等）不包含于JVM内部结构<br>
运行期数据区-----（方法区、Java堆、Java栈、程序计数器、本地方法栈）<br>
执行引擎-----和运行期数据区、本地方法交互<br>
本地方法库----和执行引擎、运行期数据区交互<br>

#### Java类的生命周期

Java文件被编译后生成Class文件，这种二进制文件不依赖于特定的硬件和操作系统。每一个Class文件都对应着<br>
唯一的一个Java文件（或者接口）。JVM识别并执行Class文件，也就是说，任一语言，只要能编译成Class文件都能被
JVM认可。<br>

##### 加载----查找并加载Class文件
##### 链接----验证（确保导入类型的正确性）、准备（为类的静态字段分配字段并使用该默认值初始化该字段）、解析（将常量池内的符号引用替换为直接引用）
##### 初始化----将类变量初始化为正确的初始值
##### 使用
##### 卸载

### 程序计数器
为保证程序能够连续的执行下去，处理器必须具有某些手段来确定下一条指令的地址。程序计数器就起到了这个作用。程序计数器（Program Counter Register）<br>
也叫作PC寄存器，是一块较小的内存空间。在虚拟机概念模型中，字节码解释器的工作就是通过改变程序计数器来选取下一条需要执行的字节码指令。Java虚拟机的多<br>
线程是通过轮流切换并分配处理器执行时间的方式来实现的，在一个确定的时刻只有一个处理器执行一条线程中的指令，为了线程在切换后能回复到正确的执行为止，<br>
每个线程都会有一个独立的程序计数器。因此，程序计数器是线程私有的。<br>
程序计数器是Java虚拟机规范中唯一没有规定OutOfMemoryError情况的数据区域。<br>

### Java虚拟机栈
每一条Java虚拟机线程都有一个线程私有的Java虚拟机栈（Java Virtual Machine Stacks）。它的生命周期与线程相同。Java虚拟机栈储存线程中的Java方法
<br>
调用的状态，包括局部变量、参数、返回值以及运算的中间结果。一个Java虚拟机栈包括多个栈帧，一个栈帧用来存储局部变量表、操作数栈、动态链接、方法出口等
<br>
信息。当线程调用一个Java方法的时候，虚拟机压入一个新的栈帧到该线程的Java虚拟机栈中，当该方法执行完成后，这个栈帧就从java虚拟机栈中弹出。
<br>
如果线程请求分配的栈容量超过Java虚拟机所允许的最大容量，会抛出StackOverflowError。<br>
如果Java虚拟机栈可以动态扩展但是无法申请到足够的内存，或者没有足够的内存去创建对应的Java虚拟机栈，则会抛出OutOfMemoryError。<br>

### Java虚拟堆




